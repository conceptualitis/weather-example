var React = require('react'),
    router = require('react-router'),
    flapp = require('app/fluxible'),
    routes = require('app/routes/client.jsx');

flapp.rehydrate(window.App, function (err, context) {
    if (err) throw err;
    router.run(routes, router.HistoryLocation, function (element) {
        var Handler = React.createFactory(element);
        React.render(Handler({
            context: context.getComponentContext()
        }), document.getElementById('app'));
    });
});
