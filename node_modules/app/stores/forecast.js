var createStore = require('fluxible-app/utils/createStore');

module.exports = createStore({
    storeName: 'ForecastStore',

    handlers: {
        'RECEIVE_FORECAST': 'receiveForecast'
    },

    initialize: function () {
        this.forecasts = {};
    },

    dehydrate: function () {
        return {
            forecasts: this.forecasts
        };
    },

    rehydrate: function (state) {
        this.forecasts = state.forecasts;
    },

    receiveForecast: function (forecast) {
        this.forecasts[forecast.day] = forecast;
        this.emitChange();
    },

    getForecast: function (key) {
        return this.forecasts[key] || null;
    }
});
