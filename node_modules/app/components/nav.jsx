var React = require('react'),
    Link = require('react-router').Link,
    Ball = require('app/components/forecasts/ball'),
    GetDayMixin = require('app/mixins/get-day');

module.exports = React.createClass({
    mixins: [GetDayMixin],

    render: function () {
        var links = [],
            day = this.getDay(),
            days = {
                'yesterday': {
                    last: null,
                    next: 'today'
                },
                'today': {
                    last: 'yesterday',
                    next: 'tomorrow'
                },
                'tomorrow': {
                    last: 'today',
                    next: null
                }
            };

        // example of using iterators to push markup into your view
        Object.keys(days[day]).forEach(function (key) {
            if (days[day][key] === null) return;
            links.push(
                <li className={ 'arrow ' + key }>
                    <Link to='forecasts' params={{ day: days[day][key] }}>
                        { /*
                            this is a decent illustration of a JSX gotcha http://facebook.github.io/react/docs/jsx-gotchas.html
                            "A safer alternative is to find the unicode number corresponding to the entity and use it inside of a JavaScript string"
                        */ }
                        { key == 'last' ? '\u25c0' : '\u25b6' }
                    </Link>
                </li>
            );
        });

        links.push(
            <Ball day={ day } context={ this.props.context } />
        );

        return (
            <nav className='weather-nav'>
                <ul>
                    { links }
                </ul>
            </nav>
        );
    }
});
